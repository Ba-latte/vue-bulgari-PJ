// ë·°ì—‘ìŠ¤ ìŠ¤í† ì–´ : ì œí’ˆë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ ë·° ë°ì´í„° ì €ì¥ì†Œ JS  - product_store.js


// ì œí’ˆ ë°ì´í„° JS ê°€ì ¸ì˜¤ê¸°
import goods_total_list from "./data/goods-total.js";

///////////////////////////// [ ë·°ì—‘ìŠ¤ ìŠ¤í† ì–´ë¥¼ í™œìš©í•œ ë³€ìˆ˜ ì„¸íŒ…í•˜ê¸° ] /////////////////////////////
const store = new Vuex.Store({
    // [ ë°ì´í„° ì„¸íŒ… êµ¬ì—­ ]
    state:{
        // ì œí’ˆ ë°ì´í„°ë¥¼ ë‹´ì€ ë³€ìˆ˜
        items: goods_total_list,

        // ê³µí†µ ì²˜ë¦¬ idxë³€ìˆ˜ (â­ìœ ì¼í‚¤)
        idx:"",

        // ê³µí†µ ì²˜ë¦¬ ì œí’ˆëª… ë³€ìˆ˜
        name:"",
        // ê³µí†µ ì²˜ë¦¬ ê°€ê²© ë³€ìˆ˜
        price:"",
        // ê³µí†µ ì²˜ë¦¬ ì¹´í…Œê³ ë¦¬ëª… ë³€ìˆ˜
        cat:"",
        // ê³µí†µ ì²˜ë¦¬ ê°¯ìˆ˜ ë³€ìˆ˜
        cnt:"",
        // ê³µí†µ ì²˜ë¦¬ ì†Œì¬ ë³€ìˆ˜
        material:"",
        // ê³µí†µ ì²˜ë¦¬ ì ¬ìŠ¤í†¤ ë³€ìˆ˜
        gemstone:"",

        // ê³µí†µ ì²˜ë¦¬ ì´ë¦„ë’¤ì˜ìˆ«ì ë³€ìˆ˜
        number:"",

        // í•„í„° ë°ì´í„°ìš© ë°°ì—´ ë³€ìˆ˜ ë§Œë“¤ê¸° : ì²´í¬/ì–¸ì²´í¬ í™•ì¸->t/fê°€ ì´ ë°°ì—´ì•ˆì— ë“¤ì–´ê°
        chkarr:[true, true, true, true],
        // ğŸ‘‰ë§¨ì²˜ìŒì— ëª¨ë“  ì œí’ˆ ë‹¤ ë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ì„  ì „ë¶€ë‹¤ ë³´ì´ê²Œ trueë¡œ í•´ë‘ê¸°
        // í•„í„° ë°ì´í„°ìš© ë°°ì—´ ì…ë ¥ê°’ ë³€ìˆ˜ : ì´ ê°’ì´ v-ifë¬¸ ì•ˆì— ë“¤ì–´ê°
        selnm:["", "", "", ""],

        // í•„í„°ë§ìš© ë°°ì—´ ë³€ìˆ˜ : ì²´í¬/ì–¸ì²´í¬ í™•ì¸ -> t/fê°€ ì´ ë°°ì—´ì•ˆì— ë“¤ì–´ê°(ëª¨ë“  ì¬ì§ˆ ë‹¤ ë³´ì´ê²Œ trueë¡œ í•´ë‘ê¸°)
        material_chk:[true, true, true],
        // í•„í„°ë§ìš© ë°°ì—´ì…ë ¥ê°’ ë³€ìˆ˜ : ì´ ê°’ì´ v-ifë¬¸ ì•ˆì— ë“¤ì–´ê°
        material_sel:["","",""],
    },

    // [ ë°ì´í„° ë³€ê²½ ë©”ì„œë“œ êµ¬ì—­ ] : ì—¬ê¸°ì— ìˆëŠ” ê²ƒ í˜¸ì¶œ ì‹œ commit()ì‚¬ìš©í•˜ê¸°
    mutations:{
        // ë°ì´í„° ì…‹ì—…í•˜ëŠ” ë©”ì„œë“œ
        setData(st, pm){
            // // ìœ ì¼í‚¤ ê°€ì ¸ì˜¤ê¸°
            // st.idx = pm.idx;

            // ì¹´í…Œê³ ë¦¬ëª… ë°”ê¾¸ê¸°
            st.cat = pm;
            console.log("ì¹´í…Œê³ ë¦¬ëŠ”? : ", pm);

            // ì „ì²´ ê°¯ìˆ˜ ì„¸ê¸°
            // console.log("ì „ì²´ ê¸¸ì´ëŠ”?", st.items.length);
            st.cnt = st.items.filter(function(x){
                return x.category == pm
            }).length
            console.log(pm, " ì˜ ì´ ê°œìˆ˜ëŠ”? : ", st.cnt);

        },
        // ìµœì´ˆ í™”ë©´ ì…‹ì—… ë©”ì„œë“œ
        initData(st, pm){
            console.log("ìµœì´ˆí™”ë©´!", pm);
            if(pm === "jewellery"){
                // this.commit("setData", "rings");
                
            }
            
        },
        // ê°€ê²© 3ìë¦¬ë§ˆë‹¤ ì½¤ë§ˆ ë¶™ì´ëŠ” ì •ê·œì‹ ë©”ì„œë“œ
        insComma(st, x) {
            console.log("3ìë¦¬ë§ˆë‹¤ ì½¤ë§ˆ ë¶™ì—¬ë¼!!", x);
            // ë§Œì•½ xê°€ ë¹„ì–´ìˆìœ¼ë©´ ì•„ë¬´ëŸ° ì²˜ë¦¬ ì—†ì´ ë¦¬í„´í•˜ê³ , xì— ê°’ì´ ìˆë‹¤ë©´ ì •ê·œì‹ìœ¼ë¡œ í‘œí˜„í•˜ê¸°
            if(!x) return;
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        },
        
        // ì´ë¦„ë’¤ì— ë¶™ì€ ìˆ«ìë¡œ forë¬¸ ì œì–´í•´ë³´ê¸° ìœ„í•œ ë©”ì„œë“œã… ã… 
        chgFn(st, x){
            st.items.forEach((v,i)=>{
                let name = v.ginfo[0];
                // ì´ë¦„ì—ì„œ ë’¤ì˜ ìˆ«ìë§Œ ì˜ë¼ë‚´ì„œ ê°€ì ¸ì˜¤ê¸°
                let number = name.substring(10);
                // console.log("ì´ë¦„ë’¤ì˜ ìˆ«ì!!: ", number);

                st.number = number;
            });
            
        },

        // ì²´í¬ë°•ìŠ¤ ì²´í¬ì‹œ ì²˜ë¦¬ë©”ì„œë“œ
        resCheck(dt){
            console.log("ì²´í¬: ", dt.chkarr);
            // 3ê°œì˜ ì²´í¬ë°•ìŠ¤ ìƒíƒœë°°ì—´ ë³€ìˆ˜ê°’ì— ë”°ë¼ ì‹¤ì œ ì¡°ê±´ì— ë“¤ì–´ê°ˆ catëª…ì„ ë„£ì–´ì¤€ë‹¤!
            dt.chkarr.forEach((v,i)=>{
                // v-ë°°ì—´ê°’ì¸ true/falseê°’ì´ ë“¤ì–´ì˜´
                if(v){
                    // ì²´í¬ë°•ìŠ¤ ì²´í¬ëœ ê²½ìš°

                    dt.selnm[i] = i==0?"rings":i==1?"necklaces":i==2?"bracelets":"earrings";
                    // ì¤‘ì²© ì‚¼í•­ì—°ì‚°ì ì‚¬ìš©
                } ////////////// if : ì²´í¬ë°•ìŠ¤ ì²´í¬ëœ ê²½ìš° //////////////////
                else{
                    // ì²´í¬ë°•ìŠ¤ ì²´í¬ ì•ˆ ëœ ê²½ìš°
                    // ë¬´ì¡°ê±´ ë¹ˆ ê°’ì„ í• ë‹¹í•´ì•¼í•¨
                    dt.selnm[i] = "";
                } ///////////// else : ì²´í¬ë°•ìŠ¤ ì²´í¬ ì•ˆ ëœ ê²½ìš° //////////////////
            });
        }, //////////////////// resCheck ë©”ì„œë“œ //////////////////////////

        // ì†Œì¬ ì²´í¬ë°•ìŠ¤ ì²´í¬ì‹œ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œ
        checkFn(st){
            console.log("ì²´í¬ë°•ìŠ¤ ìƒíƒœ!!: ", st.material_chk);
            // 3ê°œì˜ ì²´í¬ë°•ìŠ¤ ìƒíƒœë°°ì—´ ë³€ìˆ˜ê°’ì— ë”°ë¼ì„œ ì‹¤ì œ ì¡°ê±´ì— ë“¤ì–´ê°ˆ materialëª… ë„£ì–´ì£¼ê¸°
            st.material_chk.forEach((v,i)=>{
                // vì—ëŠ” ë°°ì—´ê°’ì¸ true/falseê°€ ë“¤ì–´ì˜´
                if(v){
                    st.material_sel[i] = i==0?"pink-gold":i==1?"yellow-gold":"white-gold";
                } //////////////// if : ì²´í¬ë°•ìŠ¤ê°€ ì²´í¬ëœ ê²½ìš° ///////////////////
                else{
                    // ì²´í¬ë°•ìŠ¤ ì²´í¬ ì•ˆ ëœ ê²½ìš°ëŠ” ë¬´ì¡°ê±´ ë¹ˆ ê°’ì„ í• ë‹¹í•´ì•¼ í•¨
                    st.material_sel[i] = "";
                } /////////////// else : ì²´í¬ë°•ìŠ¤ì— ì²´í¬ê°€ ì•ˆ ëœ ê²½ìš° /////////////////////
            console.log("ì²´í¬ë°•ìŠ¤ ìƒíƒœ!!: ", st.material_sel);
            }); ///////////// forEach ////////////////
        },

        // ì´ë¦„ ë°”ê¾¸ê¸° ìœ„í•œ ë©”ì„œë“œ
        chgTit(x){
            let temp="";
            switch(x){
                case 'rings': temp='ë°˜ì§€'; break;
                case 'necklaces': temp='ëª©ê±¸ì´'; break;
                case 'bracelets': temp='íŒ”ì°Œ'; break;
                case 'earrings': temp='ê·€ê±¸ì´'; break;
            }
            return temp;
        },

        // ì œí’ˆ ë¦¬ìŠ¤íŠ¸ì˜ imgbxíƒœê·¸ í´ë¦­ì‹œ ì œí’ˆ ìƒì„¸ì„¤ëª… ë°•ìŠ¤ íŒì—…í•˜ëŠ” ë©”ì„œë“œ
        openFn(st, pm){
            $(".pd_detail_bx").fadeIn();
            
            // ê°€ì ¸ì˜¨ pmì—ì„œ ê³µí†µì²˜ë¦¬ ì¸ë±ìŠ¤ë²ˆí˜¸ ì—…ë°ì´íŠ¸í•˜ê¸°!
            st.idx = pm.idx;
            
            // ê°€ì ¸ì˜¨ pmì—ì„œ ê³µí†µì²˜ë¦¬ ì¹´í…Œê³ ë¦¬ëª… ì—…ë°ì´íŠ¸í•˜ê¸°!
            st.cat = st.items[pm-1].category;

            // ê°€ì ¸ì˜¨ pmì—ì„œ ê³µí†µì²˜ë¦¬ ì¹´í…Œê³ ë¦¬ëª… ì—…ë°ì´íŠ¸í•˜ê¸°!
            st.name = st.items[pm-1].ginfo[0];

            // ê°€ì ¸ì˜¨ pmì—ì„œ ê³µí†µì²˜ë¦¬ ì†Œì¬ëª… ì—…ë°ì´íŠ¸í•˜ê¸°!
            st.material = st.items[pm-1].material;

            // ê°€ì ¸ì˜¨ pmì—ì„œ ê³µí†µì²˜ë¦¬ ì†Œì¬ëª… ì—…ë°ì´íŠ¸í•˜ê¸°!
            st.gemstone = st.items[pm-1].gemstone;

            // ê°€ì ¸ì˜¨ pmì—ì„œ ê³µí†µì²˜ë¦¬ ê°€ê²© ì—…ë°ì´íŠ¸í•˜ê¸°!
            st.price = st.items[pm-1].ginfo[1];

            console.log("ìƒì„¸ ì„¤ëª… ë°•ìŠ¤ ì˜¤í”ˆ!!", st.price);
        },

        // ì œí’ˆ ìƒì„¸í˜ì´ì§€ ë‹«ê¸° ë²„íŠ¼ í´ë¦­ì‹œ ë‹«íˆëŠ” ë©”ì„œë“œ
        closeFn(){
            console.log("ë‹«ê¸° ì•„ì´ì½˜ í´ë¦­!");
            $(".pd_detail_bx").fadeOut();
        },
    },


});


// ë‚´ë³´ë‚´ê¸°
export default store;